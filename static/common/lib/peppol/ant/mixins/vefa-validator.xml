<?xml version="1.0" encoding="UTF-8"?>
<project name="vefa-validator"
    xmlns:if="ant:if"
    xmlns:unless="ant:unless">

    <macrodef name="validator-build">
        <attribute name="identifier" default=""/>
        <attribute name="source" default=""/>
        <attribute name="scope" default=""/>
        <attribute name="target" default="target/validator"/>

        <sequential>
            <java 
                classname="no.difi.vefa.validator.dist.Cli"
                fork="true"
                failonerror="true">

                <arg value="build"/>
                <arg value="-x"/>
                <arg value="-t"/>
                <arg value="-n" unless:blank="@{identifier}"/>
                <arg value="@{identifier}" unless:blank="@{identifier}"/>
                <arg value="-a" unless:blank="@{scope}"/>
                <arg value="@{scope}" unless:blank="@{scope}"/>
                <arg value="-target"/>
                <arg value="@{target}"/>
                <arg value="@{source}"/>

                <classpath>
                    <fileset dir="${env.PDK_PATH}/lib/vefa-validator/lib" includes="*.jar"/>
                </classpath>
            </java>
        </sequential>
    </macrodef>

</project>